<%= fields_for :avatar do |a| %>
  <%= a.file_field :photo, id:"imgInp" %>
  <img class="hidden" id="blah" src="#" alt="your image" width="650"/>
<% end %>
<script type="text/javascript">
function readURL(input) {

  if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
          $('#blah').attr('src', e.target.result);
      }

      reader.readAsDataURL(input.files[0]);
  }
}

$("#imgInp").change(function(){
  $('#blah').removeClass( "hidden" )
  readURL(this);
});
</script>
